<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--Inheriting project task portal template to add diagram draw functionality -->
    <template id="portal_my_task" inherit_id="project.portal_my_task"
              name="Portal: My Task with Timesheets">
        <xpath expr="//div[@id='card_body']//div[hasclass('container')]"
               position="after">
            <a id="create_diagram" class="btn btn-primary btn-sm"
               name="create_diagram" title="Diagrams"
               aria-label="Diagram" role="button" t-att-data-id="task.id">
<!--               style="position: absolute;-->
<!--    right: 0px;-->
<!--    bottom: 112px;"-->
                <i class="fa fa-plus"/>
                Diagrams
            </a>
            <div id="task_diagram_io" style="display:none;">
                <t t-set="props" t-value="json.dumps({
                'resModel': 'project.task',
                'resId': task.id,
                'name': 'diagram',
                })"/>
                <owl-component name="draw_diagram" t-att-props="props"/>
            </div>
        </xpath>
    </template>
</odoo>